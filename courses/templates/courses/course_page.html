{%extends 'core/base.html'%}
{%load course_custom_tag%}
{%block title%}Course Page {%endblock title%}

{%block content%} 
  
    <br>
    <div class="container-fluid">
        <div hidden>
            <p>Selected Course : {{course.name}}</p>
            <p>Selected Course : {{course.description}}</p>
            <p>Selected Course : {{course.price}}</p>
            <p>Selected Course : {{course.discount}}</p>
            <p>Selected Course : {{course.video_set.all}}</p>
            <p>Selected Course : {{course.tag_set.all}}</p>
            <p>Selected Course : {{course.prerequisite_set.all}}</p>
            <p>Selected Course : {{course.learning_set.all}}</p>
        </div>
      <div class="card p-3">
        <div class="row">
            <div class="col">
                <iframe id="player" width="100%" height="315" src="https://www.youtube.com/embed/bdOwl3Zge9g" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="col-3">
                <ul class="list-group">             
                    {%for video in course.video_set.all%}
                        <li class="list-group-item"><a href="#">{{video.title}}</a></li>

                    {%endfor%}
                </ul>
            </div>
        </div>
      </div>  


        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">{{course.name}}</h5>
                  <p class="card-text">{{course.description}}</p>
                  
                </div>
              </div>
        </div>
        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Prerequisite:</h5>
                  <ol>
                    {%for pre in course.prerequisite_set.all%}
                        <li>{{pre.description}}</li>  
                    {%endfor%}
                  </ol>
                  
                </div>
              </div>
        </div>
        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                  <h5 class="card-title">Learning</h5>
                  <ol>
                    {%for pre in course.learning_set.all%}
                        <li>{{pre.description}}</li>  
                    {%endfor%}
                  </ol>
                  
                </div>
              </div>
        </div>
        
    </div>
    <script>
      var player;
      // window.onload = ()=>{
      //   player = document.getElementById('player')
      //   maintainRatio()
      // }

      document.onreadystatechange = function(){
        if(document.readyState == 'interactive'){
          player = document.getElementById('player')
          maintainRatio()
        }
      }

      function maintainRatio(){
        var w = player.clientWidth
        var h = (w*9)/16
        console.log({w,h});
        player.height = h
      }

      window.onresize = maintainRatio
    </script>
  
    

{%endblock content%}